name: "Build Dark Ages kernel on darky"  # Description of the workflow.

on:
  push:
    branches:
      - weibo-android-13  # Branch to build.
  workflow_dispatch:  # Allow manually triggering the workflow.

jobs:
  build:
    name: "Build Dark Ages kernel"
    runs-on: ubuntu-latest

    steps:
      - name: "Checkout kernel source"  # Clone the kernel source.
        uses: actions/checkout@v2

      - name: "Checkout zipper"  # (OPTIONAL) Clone the AnyKernel3 template.
        uses: actions/checkout@v2
        with:
          repository: lemniskett/AnyKernel3  # Your own AnyKernel3 repository.
          path: zipper  # Clone to path "zipper", REQUIRED.

      - name: "Android kernel build"  # Build kernel with lemniskett/android-kernel-actions.
        uses: lemniskett/android-kernel-actions@master
        with:
          arch: arm64  # Specify architecture.
          compiler: clang  # Specify toolchain to use.
          toolchain: aarch64-linux-android-  # Specify Android GCC cross-compiler toolchain.
          defconfig: exynos9820-d2s_defconfig  # Specify defconfig to use.
          image: Image.gz-dtb  # Specify final build file.
          clang_version: clang-4691093  # Use the required version of Clang.
